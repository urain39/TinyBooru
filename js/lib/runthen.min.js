!function(t){function e(t){var n=this;n._state=0,n._executor=t,n._resolveList=[],n._onCatch=null}e.prototype.then=function(t){return this._resolveList.push(t),this},e.prototype.catch=function(t){return this._onCatch=t,this},e.prototype.destroy=function(){this._resolveList.length=0,this._onCatch=null},e.prototype.done=function(){var n=this,e=null,o=null,s=null;0===n._state&&(o=function(t){for(e=t;0<n._resolveList.length;){o=n._resolveList.shift();try{e=o(e)}catch(t){"function"==typeof(s=n._onCatch)&&s(t),n._state=2;break}}n.destroy(),2!==n._state&&(n._state=1)},n._executor(o))},e.resolve=function(n){return new e(function(t){t(n)})},t.Runthen=e}(this);