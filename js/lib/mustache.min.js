!function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(U){var e=Object.prototype.toString,j=Array.isArray||function(t){return"[object Array]"===e.call(t)};function c(t){return"function"==typeof t}function T(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l(t,e){return null!=t&&"object"==typeof t&&e in t}var n=RegExp.prototype.test;var r=/\S/;function P(t){return!function(t,e){return n.call(t,e)}(r,t)}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var S=/\s*/,V=/\s+/,C=/\s*=/,O=/\s*\}/,A=/#|\^|\/|>|\{|&|=|!/;function o(t,e){if(!t)return[];var n,r,i,o=!1,s=[],a=[],u=[],p=!1,c=!1,l="",h=0;function f(){if(p&&!c)for(;u.length;)delete a[u.pop()];else u=[];c=p=!1}function d(t){if("string"==typeof t&&(t=t.split(V,2)),!j(t)||2!==t.length)throw new Error("Invalid tags: "+t);n=new RegExp(T(t[0])+"\\s*"),r=new RegExp("\\s*"+T(t[1])),i=new RegExp("\\s*"+T("}"+t[1]))}d(e||U.tags);for(var g,v,y,w,x,b,k=new I(t);!k.eos();){if(g=k.pos,y=k.scanUntil(n))for(var m=0,E=y.length;m<E;++m)P(w=y.charAt(m))?(u.push(a.length),l+=w):(o=c=!0,l+=" "),a.push(["text",w,g,g+1]),g+=1,"\n"===w&&(f(),l="",h=0,o=!1);if(!k.scan(n))break;if(p=!0,v=k.scan(A)||"name",k.scan(S),"="===v?(y=k.scanUntil(C),k.scan(C),k.scanUntil(r)):"{"===v?(y=k.scanUntil(i),k.scan(O),k.scanUntil(r),v="&"):y=k.scanUntil(r),!k.scan(r))throw new Error("Unclosed tag at "+k.pos);if(x=">"==v?[v,y,g,k.pos,l,h,o]:[v,y,g,k.pos],h++,a.push(x),"#"===v||"^"===v)s.push(x);else if("/"===v){if(!(b=s.pop()))throw new Error('Unopened section "'+y+'" at '+g);if(b[1]!==y)throw new Error('Unclosed section "'+b[1]+'" at '+g)}else"name"===v||"{"===v||"&"===v?c=!0:"="===v&&d(y)}if(f(),b=s.pop())throw new Error('Unclosed section "'+b[1]+'" at '+k.pos);return function(t){for(var e,n=[],r=n,i=[],o=0,s=t.length;o<s;++o)switch((e=t[o])[0]){case"#":case"^":r.push(e),i.push(e),r=e[4]=[];break;case"/":i.pop()[5]=e[2],r=0<i.length?i[i.length-1][4]:n;break;default:r.push(e)}return n}(function(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}(a))}function I(t){this.string=t,this.tail=t,this.pos=0}function s(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function t(){this.cache={}}I.prototype.eos=function(){return""===this.tail},I.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},I.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){var e,n,r,i=this.cache;if(i.hasOwnProperty(t))e=i[t];else{for(var o,s,a,u=this,p=!1;u;){if(0<t.indexOf("."))for(o=u.view,s=t.split("."),a=0;null!=o&&a<s.length;)a===s.length-1&&(p=l(o,s[a])||(n=o,r=s[a],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(r))),o=o[s[a++]];else o=u.view[t],p=l(u.view,t);if(p){e=o;break}u=u.parent}i[t]=e}return c(e)&&(e=e.call(this.view)),e},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(t,e){var n=this.cache,r=t+":"+(e||U.tags).join(":"),i=n[r];return null==i&&(i=n[r]=o(t,e)),i},t.prototype.render=function(t,e,n,r){var i=this.parse(t,r),o=e instanceof s?e:new s(e);return this.renderTokens(i,o,n,t,r)},t.prototype.renderTokens=function(t,e,n,r,i){for(var o,s,a,u="",p=0,c=t.length;p<c;++p)a=void 0,"#"===(s=(o=t[p])[0])?a=this.renderSection(o,e,n,r):"^"===s?a=this.renderInverted(o,e,n,r):">"===s?a=this.renderPartial(o,e,n,i):"&"===s?a=this.unescapedValue(o,e):"name"===s?a=this.escapedValue(o,e):"text"===s&&(a=this.rawValue(o)),void 0!==a&&(u+=a);return u},t.prototype.renderSection=function(t,e,n,r){var i=this,o="",s=e.lookup(t[1]);if(s){if(j(s))for(var a=0,u=s.length;a<u;++a)o+=this.renderTokens(t[4],e.push(s[a]),n,r);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)o+=this.renderTokens(t[4],e.push(s),n,r);else if(c(s)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(e.view,r.slice(t[3],t[5]),function(t){return i.render(t,e,n)}))&&(o+=s)}else o+=this.renderTokens(t[4],e,n,r);return o}},t.prototype.renderInverted=function(t,e,n,r){var i=e.lookup(t[1]);if(!i||j(i)&&0===i.length)return this.renderTokens(t[4],e,n,r)},t.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),i=t.split("\n"),o=0;o<i.length;o++)i[o].length&&(0<o||!n)&&(i[o]=r+i[o]);return i.join("\n")},t.prototype.renderPartial=function(t,e,n,r){if(n){var i=c(n)?n(t[1]):n[t[1]];if(null!=i){var o=t[6],s=t[5],a=t[4],u=i;return 0==s&&a&&(u=this.indentPartial(i,a,o)),this.renderTokens(this.parse(u,r),e,n,u)}}},t.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},t.prototype.escapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return U.escape(n)},t.prototype.rawValue=function(t){return t[1]},U.name="mustache.js",U.version="3.1.0",U.tags=["{{","}}"];var a=new t;return U.clearCache=function(){return a.clearCache()},U.parse=function(t,e){return a.parse(t,e)},U.render=function(t,e,n,r){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+function(t){return j(t)?"array":typeof t}(t)+'" was given as the first argument for mustache#render(template, view, partials)');return a.render(t,e,n,r)},U.to_html=function(t,e,n,r){var i=U.render(t,e,n);if(!c(r))return i;r(i)},U.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return i[t]})},U.Scanner=I,U.Context=s,U.Writer=t,U});